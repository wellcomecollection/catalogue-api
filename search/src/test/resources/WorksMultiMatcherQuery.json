{
  "bool": {
    "should": [
      {
        "match": {
          "search.identifiers": {
            "query": "{{query}}",
            "_name": "identifiers",
            "boost": 1000,
            "operator": "OR"
          }
        }
      },
      {
        "dis_max": {
          "queries": [
            {
              "multi_match": {
                "query": "{{query}}",
                "fields": [
                  "search.titlesAndContributors^100.0",
                  "search.titlesAndContributors.english^100.0",
                  "search.titlesAndContributors.shingles^100.0"
                ],
                "type": "best_fields",
                "operator": "And",
                "_name": "title and contributor exact spellings"
              }
            },
            {
              "multi_match": {
                "query": "{{query}}",
                "fields": [
                  "search.titlesAndContributors^80.0",
                  "search.titlesAndContributors.english^80.0",
                  "search.titlesAndContributors.shingles^80.0"
                ],
                "type": "best_fields",
                "fuzziness": "AUTO",
                "operator": "And",
                "prefix_length": "2",
                "_name": "title and contributor alternative spellings"
              }
            },
            {
              "multi_match": {
                "query": "{{query}}",
                "fields": [
                  "search.titlesAndContributors.arabic",
                  "search.titlesAndContributors.bengali",
                  "search.titlesAndContributors.french",
                  "search.titlesAndContributors.german",
                  "search.titlesAndContributors.hindi",
                  "search.titlesAndContributors.italian"
                ],
                "type": "best_fields",
                "operator": "And",
                "_name": "non-english titles and contributors"
              }
            }
          ]
        }
      },
      {
        "match": {
          "search.relations": {
            "query": "{{query}}",
            "_name": "relations",
            "boost": 1000,
            "operator": "AND"
          }
        }
      },
      {
        "multi_match": {
          "query": "{{query}}",
          "fields": [
            "data.contributors.agent.label^1000.0",
            "data.subjects.concepts.label^10.0",
            "data.genres.concepts.label^10.0",
            "data.production.*.label^10.0",
            "data.description",
            "data.physicalDescription",
            "data.language.label",
            "data.edition",
            "data.notes.contents",
            "data.lettering"
          ],
          "type": "cross_fields",
          "operator": "And",
          "_name": "data"
        }
      }
    ],
    "filter": [
      {
        "term": {
          "type": {
            "value": "Visible"
          }
        }
      }
    ],
    "minimum_should_match": "1"
  }
}

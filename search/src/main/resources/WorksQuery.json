{
  "bool": {
    "should": [
      {
        "multi_match": {
          "query": "{{query}}",
          "fields": [
            "query.title.*^5",
            "query.title.cased^10",
            "query.contributors.agent.label^10",
            "query.subjects.concepts.label^10",
            "query.genres.concepts.label^10",
            "query.production.label.*^5",
            "query.alternativeTitles.*",
            "query.description.*",
            "query.edition",
            "query.languages.label",
            "query.lettering.*",
            "query.notes.contents.*",
            "query.partOf.title.*",
            "query.physicalDescription.*"
          ],
          "type": "best_fields",
          "tie_breaker": 0.4,
          "minimum_should_match": "-55%",
          "operator": "Or"
        }
      },
      {
        "multi_match": {
          "query": "{{query}}",
          "analyzer": "lowercase",
          "fields": [
            "query.id^5",
            "query.sourceIdentifier.value^5",
            "query.identifiers.value",
            "query.items.id",
            "query.items.identifiers.value",
            "query.images.id",
            "query.images.identifiers.value",
            "query.referenceNumber*",
            "query.collectionPath*"
          ],
          "type": "best_fields",
          "boost": 100,
          "operator": "Or",
          "minimum_should_match": 1
        }
      },
      {
        "match_phrase_prefix": {
          "query.title.normalized_whole_phrase": {
            "query": "{{query}}",
            "boost": 50
          }
        }
      }
    ]
  }
}

[
    {
        "id": "precision",
        "description": "Ensure that the query brings back the works we expect at the top of the list",
        "eval": "equalTo1",
        "cases": [
            {
                "searchTerms": "information law",
                "ratings": [
                    "zkg7xqm7"
                ],
                "description": "Multi-word exact matches at the start of a title should be prioritised https://github.com/wellcomecollection/catalogue-api/issues/466"
            },
            {
                "searchTerms": "UeMQqmMb9",
                "ratings": [
                    "uemqqmb9"
                ],
                "description": "Case insensitive IDs"
            },
            {
                "searchTerms": "2013i",
                "ratings": [
                    "uemqqmb9"
                ],
                "description": "Reference number as ID"
            },
            {
                "searchTerms": "2599i",
                "ratings": [
                    "xxskepr5"
                ],
                "description": "Reference number as ID"
            },
            {
                "searchTerms": "seq88sr4 qfk4vbp8",
                "ratings": [
                    "seq88sr4",
                    "qfk4vbp8"
                ],
                "description": "multiple IDs"
            },
            {
                "searchTerms": "Cassils Time lapse",
                "ratings": [
                    "ftqy78zj"
                ],
                "description": "Contributor and title in the same query"
            },
            {
                "searchTerms": "bulloch history of bacteriology",
                "ratings": [
                    "rkcux48q"
                ],
                "description": "Contributor and title in the same query"
            },
            {
                "searchTerms": "stim",
                "ratings": [
                    "e8qxq5mv"
                ],
                "description": "Exact match on title with lowercasing and punctuation stripping"
            },
            {
                "searchTerms": "stimming",
                "ratings": [
                    "uuem7v9a"
                ],
                "description": "Ensure that we return non-typos over typos e.g. query:stimming matches:stimming > swimming"
            },
            {
                "searchTerms": "The Piggle",
                "ratings": [
                    "vp7q52gs"
                ],
                "knownFailure": true,
                "description": "Example of a known title's prefix, but not the full thing"
            },
            {
                "searchTerms": "Das neue Naturheilverfahren",
                "ratings": [
                    "execg22x"
                ],
                "description": "Example of a known title's prefix, but not the full thing"
            },
            {
                "searchTerms": "Bills of mortality",
                "ratings": [
                    "xwtcsk93"
                ],
                "description": "Example of a known title's prefix, but not the full thing"
            },
            {
                "searchTerms": "L0033046",
                "ratings": [
                    "kmebmktz"
                ],
                "description": "Miro ID matching"
            },
            {
                "searchTerms": "kmebmktz",
                "ratings": [
                    "kmebmktz"
                ],
                "description": "Work ID matching"
            },
            {
                "searchTerms": "gzv2hhgy",
                "ratings": [
                    "kmebmktz"
                ],
                "description": "Image ID matching"
            },
            {
                "searchTerms": "Oxford dictionary of national biography",
                "ratings": [
                    "ruedafcw"
                ],

                "description": "Example of a known title's prefix, but not the full thing",
                "knownFailure": true
            },
            {
                "searchTerms": "Hunterian wa/hmm",
                "ratings": [
                    "f3gpbk74"
                ],
                "description": "archive reference number and a word from the title",
                "knownFailure": true
            },
            {
                "searchTerms": "mammas favorites",
                "ratings": [
                    "dbqsn5gk"
                ],
                "description": "Searching without punctuation should match a document with punctuation"
            },
            {
                "searchTerms": "sophies shell",
                "ratings": [
                    "gdfhp4gw"
                ],
                "description": "Searching without punctuation should match a document with punctuation"
            },
            {
                "searchTerms": "sophie's shell",
                "ratings": [
                    "gdfhp4gw"
                ],
                "knownFailure": true,
                "description": "Searching for a term including an apostrophe should match the same term"
            }
        ],
        "metric": {
            "precision": {
                "relevant_rating_threshold": 3,
                "k": 1
            }
        }
    },
    {
        "id": "recall",
        "description": "Ensure that the query brings back the results we expect somewhere in the list",
        "eval": "equalTo1",
        "cases": [
            {
                "searchTerms": "indian journal of medical research 1930-1931",
                "ratings": [
                    "p444t8rp",
                    "kccp8d5t"
                ],
                "description": "Query where most search terms (but not all) are in the title"
            },
            {
                "searchTerms": "Atherosclerosis: an introduction to atherosclerosis",
                "ratings": [
                    "bcwvtknn",
                    "rty8296y"
                ],
                "description": "Two works with matching titles"
            },
            {
                "searchTerms": "2013i 2599i",
                "ratings": [
                    "uemqqmb9",
                    "xxskepr5"
                ],
                "description": "Multiple IDs"
            },
            {
                "searchTerms": "wa/hmm durham",
                "ratings": [
                    "euf49qkx",
                    "tpxy78kr",
                    "gu3z98y4",
                    "ad3rfubw"
                ],
                "description": "Archive refno and a word from the title"
            },
            {
                "searchTerms": "wa/hmm benin",
                "ratings": [
                    "qfdvkegw",
                    "je5pm2gj",
                    "dppjjtqz"
                ],
                "description": "Archive refno and a word from the description"
            },
            {
                "searchTerms": "WA/HMM/CM benin",
                "ratings": [
                    "qfdvkegw",
                    "je5pm2gj",
                    "dppjjtqz"
                ],
                "description": "Archive refno and a word from the description"
            },
            {
                "searchTerms": "eugenics society annual reports",
                "ratings": [
                    "k9w95csw",
                    "asqf8kzb",
                    "n499pzsr"
                ],
                "description": "Matches archives without providing refnos",
                "knownFailure": true
            },
            {
                "searchTerms": "لكشف",
                "ratings": [
                    "ymnmz59p"
                ],
                "description": "Matches stemmed arabic text",
                "knownFailure": true
            },
            {
                "searchTerms": "الكشف",
                "ratings": [
                    "ymnmz59p"
                ],
                "description": "Matches arabic text",
                "knownFailure": true
            },
            {
                "searchTerms": "معرفت",
                "ratings": [
                    "a9w79fzj"
                ],
                "description": "Matches arabic text",
                "knownFailure": true
            },
            {
                "searchTerms": "عرف",
                "ratings": [
                    "a9w79fzj"
                ],
                "description": "Matches stemmed arabic text",
                "knownFailure": true
            }
        ],
        "metric": {
            "recall": {
                "relevant_rating_threshold": 3,
                "k": 100
            }
        }
    },
    {
        "id": "alternative-spellings",
        "description": "Ensure that the query returns results for search terms which are misspelled or differently transliterated.",
        "eval": "equalTo1",
        "cases": [
            {
                "searchTerms": "al-tibb",
                "ratings": [
                    "t4jqq9ue"
                ],
                "knownFailure": true
            },
            {
                "searchTerms": "Al-ṭibb",
                "ratings": [
                    "t4jqq9ue"
                ],
                "knownFailure": true
            },
            {
                "searchTerms": "nuğūm",
                "ratings": [
                    "m94cyux7"
                ],
                "knownFailure": true
            },
            {
                "searchTerms": "nujum",
                "ratings": [
                    "m94cyux7"
                ],
                "knownFailure": true
            },
            {
                "searchTerms": "arbeiten",
                "ratings": [
                    "xn7yyrqf"
                ]
            },
            {
                "searchTerms": "savoire",
                "ratings": [
                    "tbuwy9bk"
                ],
                "description": "french stemming"
            },
            {
                "searchTerms": "conosceva",
                "ratings": [
                    "j3w6u4t2",
                    "mt8bj5zk",
                    "vhf56vvz"
                ],
                "description": "italian stemming"
            },
            {
                "searchTerms": "sharh",
                "ratings": [
                    "frd5y363"
                ]
            },
            {
                "searchTerms": "arkaprakāśa",
                "ratings": [
                    "qqh7ydr3",
                    "qb7eggtk",
                    "jvw4bdrz",
                    "jh46tazh"
                ]
            }
        ],
        "metric": {
            "recall": {
                "relevant_rating_threshold": 3,
                "k": 1000
            }
        }
    },
    {
        "id": "order",
        "description": "Check that the order of results is correct",
        "cases": [
            {
                "searchTerms": "Crète",
                "before": [
                    "yyz378xr",
                    "d6aezcvw",
                    "z4yefjez"
                ],
                "after": [
                    "gsehqy4k",
                    "zq2yf7uz",
                    "d2c3k3d3"
                ],
                "description": "Term with diacritics is scored higher than the asciifolded equivalent, or versions with different diacritics",
                "knownFailure": true
            },
            {
                "searchTerms": "horse furniture",
                "description": "Matches ordered terms ahead of unordered terms",
                "before": [
                    "kdusu63n"
                ],
                "after": [
                    "uxcxfj9d",
                    "fpeerby9"
                ]
            },
            {
                "searchTerms": "everest chest",
                "description": "Matches titles over descriptions",
                "before": [
                    "jmt44asm",
                    "p2yucm2e",
                    "pr929v3m"
                ],
                "after": [
                    "g44jyqgs"
                ]
            },
            {
                "searchTerms": "crips",
                "description": "Pluralised match appears before singular stemmed match",
                "before": [
                    "sgpyy6gb",
                    "bp45sf6d"
                ],
                "after": [
                    "ptvgbenh",
                    "r3eue8kw"
                ]
            },
            {
                "searchTerms": "crip",
                "description": "Exact singular match appears before pluralised match",
                "before": [
                    "ptvgbenh",
                    "r3eue8kw"
                ],
                "after": [
                    "sgpyy6gb",
                    "bp45sf6d"
                ]
            },
            {
                "searchTerms": "CRIPS",
                "description": "Capitalised match appears before lower case match",
                "before": [
                    "bp45sf6d",
                    "s949zn4f"
                ],
                "after": [
                    "ptvgbenh",
                    "sk78b6pr"
                ]
            },
            {
                "searchTerms": "AIDS",
                "description": "Capitalised match appears before lower case match",
                "before": [
                    "ae6cc6d9",
                    "gvdwhbnd",
                    "er9z8sj4",
                    "n9xsxzg7"
                ],
                "after": [
                    "gvem6rts",
                    "tdwgsdsh",
                    "vfwczwr7"
                ]
            },
            {
                "searchTerms": "aid",
                "description": "Matches exact terms before stemmed terms",
                "before": [
                    "bt9bf26e",
                    "rgrvznhs",
                    "v63vtprn"
                ],
                "after": [
                    "ae6cc6d9",
                    "gvdwhbnd",
                    "er9z8sj4",
                    "n9xsxzg7"
                ]
            },
            {
                "searchTerms": "aids poster",
                "description": "Matches ordered terms ahead of unordered terms",
                "before": [
                    "t5sb3sab",
                    "bry8xyza"
                ],
                "after": [
                    "e8vnd4s7"
                ]
            },
            {
                "searchTerms": "aids poster",
                "description": "Matches both terms ahead of single term",
                "before": [
                    "t5sb3sab"
                ],
                "after": [
                    "fyzv7d6h"
                ]
            },
            {
                "searchTerms": "x-ray",
                "description": "tokens joined by hyphens are matched above tokens which are joined by whitespace",
                "before": [
                    "maxctjgf",
                    "c3jatdq5",
                    "dmcchav2",
                    "gfp86e2b"
                ],
                "after": [
                    "thgzs6pd"
                ]
            },
            {
                "searchTerms": "Mackie",
                "before": [
                    "k8ccmj6t",
                    "s2tnttyn"
                ],
                "after": [
                    "ae5kymcs"
                ],
                "description": "An exact matches in the title should appear before a misspelled match in the contributor and title. Also uses a filter",
                "filter": {
                    "term": {
                        "query.format.id": "h"
                    }
                }
            }
        ]
    }
]
